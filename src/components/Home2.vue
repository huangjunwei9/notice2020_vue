<template> 
<div id="home2">
    <div class="header" ref="header">
        <div id="sys-label">
            <img id="sys-icon" src="../assets/é€šçŸ¥.jpg" />
            <span id="sys-name">{{sysName}}</span>
            <div class="userInfo" type="info" >
                <b>{{user.nickname}}</b>
                <el-button class="changeRoleButton">
                    <span>åˆ‡æ¢è§’è‰²</span>
                    <div class="rolesDropdown-content">
                        <p class="content" @click="getPermissionByRole()">1. xxxè§’è‰²ã€‚å“åº”ï¼šæ ¹æ®è§’è‰²çš„Idè·å–å¯¹åº”çš„æƒé™</p>
                        <p>2. xxxè§’è‰²ã€‚å“åº”ï¼šæ ¹æ®è§’è‰²çš„Idè·å–å¯¹åº”çš„æƒé™</p>
                    </div>
                </el-button>
                
                
                <el-button class="quitButton">é€€å‡º</el-button>
            </div>
            
        </div>
    </div>

    <div class="aside" ref="aside">
        <div id="navgation-mean">
            <h1 @click="asideMeanControl()" >{{asideTitle}}</h1> 
            
            <!-- éå†ä¸€çº§èœå• -->
            <div id="nav1" v-if="navgationBlean">
            <ul v-for="(parentSysPermission, index1) in parentSysPermissions" :key="index1">
                <!-- å±•ç¤ºä¸€çº§èœå• -->
                <h2 class="mean1" @click="showMean(parentSysPermission, index1)" >
                {{index1 + 1}}. 
                {{parentSysPermission.permissionName}}
                </h2>
                <!-- éå†äºŒçº§èœå• -->
                <div v-if="parentSysPermission.needShow">
                <ul v-for="(sysPermission, index2) in sysPermissions.data" :key="index2" >
                    <template  v-if="sysPermission.parentId == parentSysPermission.id" >
                        <router-link id="mean2"  :to="sysPermission.url" exact>
                            {{sysPermission.permissionName}}             
                        </router-link>     
                    </template> 
                </ul>
                </div>    
               </ul>
            </div>
        </div>
    </div>

    <div class="main" ref="main">
        <div>
            <router-view/>   
        </div>
        <div>ä½ å¥½</div>
        <div>æˆ‘å¥½</div>
        <div>å¤§å®¶å¥½</div>
        
    </div> 
    

</div>
</template>

<script>
export default {
  name: "home2",
  data() {
    return {
        user:{
            nickname: "ä¸€åªå°ç™½é¼ ğŸ­"//æ˜µç§°

        },
        roles:[{
            id: 1,
            
        }],
        sysName:'é€šçŸ¥ç³»ç»Ÿ',
        asideTitle:"ç‚¹è¿™æ”¶èµ·èœå•",
        navgationBlean: true,
        isActive: true,
        parentSysPermissions: [
            {
                "id": 9,
                "permissionName": "ç”¨æˆ·ç®¡ç†",
                "url": null,
                "level": 1,
                "parentId": "9",
                "createTime": null,
                "creatorId": null,
                "updateTime": null,
                "updatorId": null,
                "deleteFlg": null,
                "needShow":true,
            },
            {
                "id": 7,
                "permissionName": "äº‹åŠ¡ç®¡ç†",
                "url": null,
                "level": 1,
                "parentId": "0",
                "createTime": null,
                "creatorId": null,
                "updateTime": null,
                "updatorId": null,
                "deleteFlg": null,
                "needShow":true,
            },
            {
                "id": 10,
                "permissionName": "æ ‡ç­¾ç®¡ç†",
                "url": null,
                "level": 1,
                "parentId": "0",
                "createTime": null,
                "creatorId": null,
                "updateTime": null,
                "updatorId": null,
                "deleteFlg": null,
                "needShow":true,
            },
            {
                "id": 8,
                "permissionName": "æƒé™ç®¡ç†",
                "url": null,
                "level": 1,
                "parentId": "0",
                "createTime": null,
                "creatorId": null,
                "updateTime": null,
                "updatorId": null,
                "deleteFlg": null,
                "needShow":true,
            }
        ],
        sysPermissions:{
          "code": 200,
          "msg": "",
          "data": [
              {
            "id": 1,
            "permissionName": "åˆ›å»ºäº‹åŠ¡",
            "url": "/thing/create",
            "level": 2,
            "parentId": "7",
            "createTime": null,
            "creatorId": null,
            "updateTime": null,
            "updatorId": null,
            "deleteFlg": null
            },
            {
                "id": 2,
                "permissionName": "è‡ªå·±åˆ›å»ºçš„äº‹åŠ¡",
                "url": "/thing/myCreateList",
                "level": 2,
                "parentId": "7",
                "createTime": null,
                "creatorId": null,
                "updateTime": null,
                "updatorId": null,
                "deleteFlg": null
            },
            {
                "id": 3,
                "permissionName": "æ¥æ”¶åˆ°çš„äº‹åŠ¡",
                "url": "/thing/myReceiveList",
                "level": 2,
                "parentId": "7",
                "createTime": null,
                "creatorId": null,
                "updateTime": null,
                "updatorId": null,
                "deleteFlg": null
            },
            {
                "id": 4,
                "permissionName": "åˆ›å»ºè§’è‰²",
                "url": "/permission/createRole",
                "level": 2,
                "parentId": "8",
                "createTime": null,
                "creatorId": null,
                "updateTime": null,
                "updatorId": null,
                "deleteFlg": null
            },
            {
                "id": 5,
                "permissionName": "åˆ›å»ºç”¨æˆ·",
                "url": "/permission/createUser",
                "level": 2,
                "parentId": "9",
                "createTime": null,
                "creatorId": null,
                "updateTime": null,
                "updatorId": null,
                "deleteFlg": null
            },
            {
                "id": 6,
                "permissionName": "åˆ›å»ºæƒé™",
                "url": "/permission/createPermission",
                "level": 2,
                "parentId": "8",
                "createTime": null,
                "creatorId": null,
                "updateTime": null,
                "updatorId": null,
                "deleteFlg": null
            },
            {
                "id": 11,
                "permissionName": "æˆ‘çš„æ ‡ç­¾",
                "url": "/tag/myCreateList",
                "level": 2,
                "parentId": "10",
                "createTime": null,
                "creatorId": null,
                "updateTime": null,
                "updatorId": null,
                "deleteFlg": null
            }
          ]
        },
    };
  },
  computed:{
    showTest:{ 
      get(){},
      set(){} 
    },
    hellohuangjunwei9(){
      console.log('computed, hellohuangjunwei9')
    }
  },
  methods:{
    // å±•å¼€/æ”¶èµ·æŸä¸€çº§èœå•
    showMean(parentSysPermission, index1){
      console.log('å±•å¼€/æ”¶èµ·æŸä¸€çº§èœå•')
      this.parentSysPermissions[index1].needShow = !parentSysPermission.needShow
      console.log(parentSysPermission.needShow)
    },
    // å±•å¼€/æ”¶èµ·å·¦ä¾§èœå•
    asideMeanControl(){
        console.log("æ”¹å˜èœå•æ ");
        this.navgationBlean = !this.navgationBlean;
        console.log(this.navgationBlean)
        if(this.navgationBlean == true){
            this.$refs.aside.style.width = '15%';
            this.$refs.main.style.width = '84.68%';
            this.$refs.main.style.margin = '0 0 0 15%'; 
            this.asideTitle = 'ç‚¹è¿™æ”¶èµ·èœå•'
        }else{
            this.$refs.aside.style.width = '2%';
            this.$refs.main.style.width = '97.8%';
            this.$refs.main.style.margin = '0 0 0 2%';
            this.asideTitle = 'ç‚¹è¿™å±•å¼€èœå•'
        }
        
    }
  },
};
</script>


<style scope>
html,body{
    height: 100%;
    margin: 0px;
}
#home2{
    height: 100%;
    box-sizing: border-box;
    padding: 50px 0 0;
}
.header{
    background-color: #303643;
    color: orange;
    height: 50px;
    width: 100%;
    margin: -50px 0px 0px;
    position: fixed;
}
.aside{
    background-color: #444244;
    color: rgb(255, 255, 255);
    width: 15%;
    display: inline-block;
    height: 100%;
    position: fixed;
}
.main{
    background-color: #DCE0E4;
    color: #333;
    width: 84.68%;
    display: inline-block;
    height: 100%;
    margin: 0 0 0 15%;
    overflow: scroll;
}


/**************** å¤´éƒ¨  ****************/
/* ç³»ç»Ÿå›¾æ ‡ */
#sys-icon{
    width: 50px;
}
/* â€œé€šçŸ¥ç®¡ç†ç³»ç»Ÿâ€ */
#sys-name{
    color: orange;
    font-size: 40px;
    position: relative;
    top: -10px;
    margin: 0 0 0 0px;
}
/* ç”¨æˆ·è´¦å·ä¿¡æ¯ */
.userInfo{
    color:green;
    letter-spacing: 3px; /* å­—ä½“é—´è· */
    margin-top: 0px;
    margin-left: 77%;
    position: relative;
    top: -55px;
    padding: 5px 10px;
}
/* åˆ‡æ¢è§’è‰²æŒ‰é’® */
.changeRoleButton{
    background: khaki;
    color:green;
    letter-spacing: 3px; /* å­—ä½“é—´è· */
    position: relative;
    top: -5px;
    display: inline-block;
}
/* åˆ‡æ¢è§’è‰²æŒ‰é’®çš„ä¸‹æ‹‰å†…å®¹ */
.rolesDropdown-content {
  display: none;
  position: absolute;
  background-color: #f9f9f9;
  width: 200px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  margin: 12px 0 0 -20px;
  border: 1px solid red;
  padding: 1px;
  overflow: scroll;
  text-align: left;
}
.changeRoleButton:hover .rolesDropdown-content {
  display: block;
}
/* é€€å‡ºæŒ‰é’® */
.quitButton{
    background: khaki;
    color:green;
    letter-spacing: 3px; /* å­—ä½“é—´è· */
    position: relative;
    top: -5px;
}



/**************** èœå•æ  *****************/
#navgation-mean{
  margin: 0px 0px 0px 0px;  
}
/* â€œç‚¹è¿™æ”¶é½èœå•â€å››ä¸ªå­— */
#navgation-mean h1{
  font-size: 22px;
  color: rgb(158, 197, 126);
  display:block;
}
/* ä¸€çº§èœå• */
.mean1{
  margin: 0px 0px 0px 0px;
  font-size: 17px;
  color: rgb(222, 233, 192);  
}
/* äºŒçº§èœå• */
#mean2{
  font-size: 15px;
  text-decoration: none;
  display:block;
}
:link {color: white}
a:visited {color: #00FF00}
a:hover {color: #FF00FF}
a:active {color: #0000FF}
/* å»æ‰ä¸‹åˆ’çº¿ */
.router-link-active {
  text-decoration: none;
}
</style>

